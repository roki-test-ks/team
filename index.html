<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–≤—ñ—Ç –≤–∏–∫–æ–Ω–∞–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å</title>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .form-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        select,
        input,
        textarea {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }

        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        #success {
            display: none;
            margin-top: 15px;
            padding: 10px;
            color: #4CAF50;
            border: 1px solid #4CAF50;
            border-radius: 5px;
        }
    </style>
</head>

<body>

    <div class="form-container">
        <form id="card--body">
            <div class="form-group">
                <label for="name">–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä:</label>
                <select id="name" name="name" required>
                    <option value="">–í–∏–±–µ—Ä—ñ—Ç—å —Å–≤–æ—î —ñ–º'—è</option>
                    <option value="–†–æ–º–∞">–ö–æ—Å—Ç—è (@Crypto_K_SS)</option>
                    <option value="–†–æ–º–∞">–†–æ–º–∞ (–Ω—ñ–Ω–∑—è) @roki0200</option>
                    <option value="–ú–∞–∫—Å">–ú–∞–∫—Å (@maksnikaev)</option>
                    <option value="–û–ª—è">–û–ª—è (@olimonchik02)</option>
                    <option value="–Ñ–ª–µ–Ω–∞">–Ñ–ª–µ–Ω–∞ (@ElenaKieV2023 )</option>
                    <option value="–ê–Ω—Ç–æ–Ω">–ê–Ω—Ç–æ–Ω (@ATN_DNL)</option>
                    <option value="seka">–°–∞—à–∞ (@Sekalad)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="task">–ó–∞–≤–¥–∞–Ω–Ω—è:</label>
                <textarea id="task" name="task" rows="4" required></textarea>
            </div>
            <div class="form-group">
                <label for="status">–°—Ç–∞—Ç—É—Å:</label>
                <select id="status" name="status" required>
                    <option value="">–í–∏–±–µ—Ä—ñ—Ç—å —Å—Ç–∞—Ç—É—Å</option>
                    <option value="–í–∏–∫–æ–Ω–∞–Ω–æ">–í–∏–∫–æ–Ω–∞–Ω–æ</option>
                    <option value="–í –ø—Ä–æ—Ü–µ—Å—ñ">–í –ø—Ä–æ—Ü–µ—Å—ñ</option>
                    <option value="–í—ñ–¥–∫–ª–∞–¥–µ–Ω–æ">–í—ñ–¥–∫–ª–∞–¥–µ–Ω–æ</option>
                </select>
            </div>
            <div class="form-group">
                <label for="comments">(–Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ) –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ:</label>
                <textarea id="comments" name="comments" rows="4"></textarea>
            </div>
            <div class="form-group">
                <label for="challenges">(–Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ) –í–∏–∫–ª–∏–∫–∏ —Ç–∞ –ø—Ä–æ–±–ª–µ–º–∏:</label>
                <textarea id="challenges" name="challenges" rows="4"></textarea>
            </div>
            <div class="form-group">
                <label for="suggestions">(–Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ) –ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó —Ç–∞ —ñ–¥–µ—ó:</label>
                <textarea id="suggestions" name="suggestions" rows="4"></textarea>
            </div>
            <button type="submit">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
        </form>
        <div id="success"></div>
    </div>

    <script>
        const TOKEN = "6735810512:AAFUyZ6QanTJ4V8SKPHiNLdOx7l9tD1RUWk";
        const CHAT_ID = "-1002028539179";
        const TOPIC_ID = "97"; // –∑–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –≤–∞—à–æ—ó —Ç–µ–º–∏ –≥—Ä—É–ø–∏
        const PINNED_MESSAGE_ID = 107; // –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —ñ—Å–Ω—É—é—á–æ–≥–æ –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
        const URL_API = `https://api.telegram.org/bot${TOKEN}/sendMessage`;
        const EDIT_URL_API = `https://api.telegram.org/bot${TOKEN}/editMessageText`;
        const success = document.getElementById('success');

        let pinnedMessageText = '';

        // –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
        axios.post(`https://api.telegram.org/bot${TOKEN}/getChat`, {
            chat_id: CHAT_ID
        })
            .then((response) => {
                const pinnedMessage = response.data.result.pinned_message;
                if (pinnedMessage) {
                    pinnedMessageText = pinnedMessage.text || '<b>–ó–∞–∫—Ä—ñ–ø–ª–µ–Ω—ñ –∑–≤—ñ—Ç–∏:</b>\n';
                    console.log(`–¢–µ–∫—Å—Ç –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: ${pinnedMessageText}`);
                } else {
                    console.warn('–ó–∞–∫—Ä—ñ–ø–ª–µ–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.');
                }
            })
            .catch((err) => {
                console.warn('–ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:', err);
            });

        document.getElementById('card--body').addEventListener('submit', function (e) {
            e.preventDefault();

            const name = this.name.value;
            const task = this.task.value;
            const status = this.status.value;
            const comments = this.comments.value || "–ù–µ–º–∞—î";
            const challenges = this.challenges.value || "–ù–µ–º–∞—î";
            const suggestions = this.suggestions.value || "–ù–µ–º–∞—î";

            if (name !== '') {
                let message = `<b>–ó–≤—ñ—Ç –≤–∏–∫–æ–Ω–∞–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å</b>\n`;
                message += `<b>–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä:</b> ${name}\n`;
                message += `<b>–ó–∞–≤–¥–∞–Ω–Ω—è:</b> ${task}\n`;
                message += `<b>–°—Ç–∞—Ç—É—Å:</b> ${status}\n`;
                message += `<b>–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ:</b> ${comments}\n`;
                message += `<b>–í–∏–∫–ª–∏–∫–∏ —Ç–∞ –ø—Ä–æ–±–ª–µ–º–∏:</b> ${challenges}\n`;
                message += `<b>–ü—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó —Ç–∞ —ñ–¥–µ—ó:</b> ${suggestions}`;

                axios.post(URL_API, {
                    chat_id: CHAT_ID,
                    message_thread_id: TOPIC_ID, // –î–æ–¥–∞—Ç–∏ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —Ç–µ–º–∏
                    parse_mode: 'html',
                    text: message
                })
                    .then((res) => {
                        const messageId = res.data.result.message_id;
                        const newLink = ` <a href="https://t.me/c/${CHAT_ID.substring(4)}/${messageId}"> üìÖ –ó–≤—ñ—Ç ${new Date().toLocaleDateString()} –≤—ñ–¥ ${name}</a> \n`;
                        pinnedMessageText += newLink;
                        console.log(`–¢–µ–∫—Å—Ç –æ–Ω–æ–≤–ª–µ–Ω–æ–≥–æ –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: ${pinnedMessageText}`);

                        axios.post(EDIT_URL_API, {
                            chat_id: CHAT_ID,
                            message_id: PINNED_MESSAGE_ID,
                            parse_mode: 'html',
                            text: `<b>–ó–∞–∫—Ä—ñ–ø–ª–µ–Ω—ñ –∑–≤—ñ—Ç–∏:</b>\n${pinnedMessageText}`
                        })
                            .then((response) => {
                                console.log(response.data);
                                success.innerHTML = "–ó–≤—ñ—Ç —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–∞ –¥–æ–¥–∞–Ω–æ –¥–æ –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è!";
                                success.style.display = "block";
                            })
                            .catch((err) => {
                                console.error("–ü–æ–º–∏–ª–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: ", err.response ? err.response.data : err);
                                success.innerHTML = "–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ, –∞–ª–µ –Ω–µ –≤–¥–∞–ª–æ—Å—è –æ–Ω–æ–≤–∏—Ç–∏ –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è. –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ @roki0200 (https://t.me/roki0200)";
                                success.style.display = "block";
                            });
                    })
                    .catch((err) => {
                        console.error("–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏: ", err.response ? err.response.data : err);
                        success.innerHTML = `–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –∑–≤—ñ—Ç—É: ${err.response ? err.response.data.description : '–ù–µ–≤—ñ–¥–æ–º–∞ –ø–æ–º–∏–ª–∫–∞ –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ @roki0200 (https://t.me/roki0200)'}`;
                        success.style.display = "block";
                    });
            } else {
                success.innerHTML = "–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∏–±–µ—Ä—ñ—Ç—å —Å–≤–æ—î —ñ–º'—è!";
                success.style.display = "block";
            }
        });
    </script>

</body>

</html>